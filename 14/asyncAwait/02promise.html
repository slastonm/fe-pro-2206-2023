<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.onload = function(){
            let posts = [
                {id:1, text:'hello'},
                {id:2, text:'hello2'}
            ];
            function getPosts(){
                setTimeout(()=>{
                    let dataItem = '';
                    posts.forEach((post)=>{
                        dataItem +=`<p>${post.text}</p>`;
                    });
                    document.body.innerHTML = dataItem;
                }, 1000);
            } 
            // function createPost(post, callBackFn){
            //     setTimeout(()=>{
            //         posts.push(post);
            //         callBackFn();
            //     }, 3000);
            // } 
            function createPost(post){
                return new Promise((resolve, reject) =>{
                    setTimeout(()=>{
                        posts.push(post);
                        let errorValue = true;
                        if(!errorValue){
                            resolve();
                        }
                        else{
                            reject('Error in Promise function');
                        }
                    }, 3000);
                })
            }
            getPosts();
            // createPost({id:3, text:'hello3'}, getPosts);
            createPost({id:3, text:'hello3'}).then(getPosts).catch(err=>console.log(err));          

        }


    </script>
</head>
<body>
    
</body>
</html>